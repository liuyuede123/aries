(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1485c72c"],{"048f":function(e,t,a){},6957:function(e,t,a){"use strict";var n=a("048f"),i=a.n(n);i.a},"9a24":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("d2-container",[a("template",{slot:"header"},[e._v("外观 / 菜单")]),a("div",{staticClass:"operation-box"},[a("el-form",{staticClass:"demo-form-inline",attrs:{slot:"header",inline:!0},slot:"header"},[a("el-form-item",[a("el-button",{attrs:{size:"small",type:"danger"},on:{click:e.handleNavsMultiDel}},[a("i",{staticClass:"el-icon-delete"}),e._v(" 批量删除 ")])],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.openAddDialog}},[a("i",{staticClass:"el-icon-plus"}),e._v(" 新增 ")])],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:e.tableData,"row-key":"ID","tree-props":{children:"child_navs",hasChildren:"hasChildren"}},on:{"selection-change":e.handleSelectChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"name",label:"菜单名称",width:"180"}}),a("el-table-column",{attrs:{prop:"url",label:"URL",width:"180"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{attrs:{content:"编辑",placement:"top-start"}},[a("el-button",{attrs:{size:"small",icon:"el-icon-edit"},on:{click:function(a){return e.openEditDialog(t.row)}}})],1),a("el-tooltip",{attrs:{content:"向上移动",placement:"top-start"}},[a("el-button",{attrs:{size:"small",icon:"el-icon-top"},on:{click:function(a){return e.handleNavMoveUp(t.row,t.$index)}}})],1),a("el-tooltip",{attrs:{content:"向下移动",placement:"top-start"}},[a("el-button",{attrs:{size:"small",icon:"el-icon-bottom"},on:{click:function(a){return e.handleNavMoveDown(t.row,t.$index)}}})],1),a("el-tooltip",{attrs:{content:"删除",placement:"top-start"}},[a("el-button",{attrs:{size:"small",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return e.handleNavDelete(t.row.ID)}}})],1)]}}])})],1),a("el-dialog",{attrs:{title:"添加菜单",visible:e.dialogOptions.addVisible,"with-header":!1,width:"50%"},on:{"update:visible":function(t){return e.$set(e.dialogOptions,"addVisible",t)}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,rules:e.addRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"菜单名称",prop:"name"}},[a("el-input",{attrs:{size:"small",type:"text"},model:{value:e.addForm.name,callback:function(t){e.$set(e.addForm,"name",t)},expression:"addForm.name"}})],1),a("el-form-item",{attrs:{label:"父级菜单",prop:"parent_nav_id"}},[a("el-select",{attrs:{size:"small",clearable:"",placeholder:"请选择分类"},on:{clear:function(t){e.addForm.parent_nav_id=null}},model:{value:e.addForm.parent_nav_id,callback:function(t){e.$set(e.addForm,"parent_nav_id",t)},expression:"addForm.parent_nav_id"}},e._l(e.tableData,(function(e){return a("el-option",{key:e.ID,attrs:{label:e.name,value:e.ID}})})),1)],1),a("el-form-item",{attrs:{label:"打开方式",prop:"open_type"}},[a("el-radio",{attrs:{label:e.curWindow},model:{value:e.addForm.open_type,callback:function(t){e.$set(e.addForm,"open_type",t)},expression:"addForm.open_type"}},[e._v("当前窗口")]),a("el-radio",{attrs:{label:e.newWindow},model:{value:e.addForm.open_type,callback:function(t){e.$set(e.addForm,"open_type",t)},expression:"addForm.open_type"}},[e._v("新窗口")])],1),a("el-form-item",{attrs:{label:"URL",prop:"url"}},[a("el-input",{attrs:{size:"small",type:"text"},model:{value:e.addForm.url,callback:function(t){e.$set(e.addForm,"url",t)},expression:"addForm.url"}})],1),a("el-form-item",{attrs:{label:"图标",prop:"icon"}},[a("el-input",{attrs:{size:"small",type:"text"},model:{value:e.addForm.icon,callback:function(t){e.$set(e.addForm,"icon",t)},expression:"addForm.icon"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:e.dialogOptions.addBtnLoading},on:{click:e.handleNavAdd}},[e._v("保存")]),a("el-button",{on:{click:function(t){e.dialogOptions.addVisible=!1}}},[e._v("取消")])],1)],1)],1),a("el-dialog",{attrs:{title:"修改菜单",visible:e.dialogOptions.editVisible,"with-header":!1,width:"50%"},on:{"update:visible":function(t){return e.$set(e.dialogOptions,"editVisible",t)}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.editRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"菜单名称",prop:"name"}},[a("el-input",{attrs:{size:"small",type:"text"},model:{value:e.editForm.name,callback:function(t){e.$set(e.editForm,"name",t)},expression:"editForm.name"}})],1),a("el-form-item",{attrs:{label:"父级菜单",prop:"parent_nav_id"}},[a("el-select",{attrs:{size:"small",clearable:"",placeholder:"请选择分类"},on:{clear:function(t){e.editForm.parent_nav_id=null}},model:{value:e.editForm.parent_nav_id,callback:function(t){e.$set(e.editForm,"parent_nav_id",t)},expression:"editForm.parent_nav_id"}},e._l(e.tableData,(function(e){return a("el-option",{key:e.ID,attrs:{label:e.name,value:e.ID}})})),1)],1),a("el-form-item",{attrs:{label:"打开方式",prop:"open_type"}},[a("el-radio",{attrs:{label:e.curWindow},model:{value:e.editForm.open_type,callback:function(t){e.$set(e.editForm,"open_type",t)},expression:"editForm.open_type"}},[e._v("当前窗口")]),a("el-radio",{attrs:{label:e.newWindow},model:{value:e.editForm.open_type,callback:function(t){e.$set(e.editForm,"open_type",t)},expression:"editForm.open_type"}},[e._v("新窗口")])],1),a("el-form-item",{attrs:{label:"URL",prop:"url"}},[a("el-input",{attrs:{size:"small",type:"text"},model:{value:e.editForm.url,callback:function(t){e.$set(e.editForm,"url",t)},expression:"editForm.url"}})],1),a("el-form-item",{attrs:{label:"图标",prop:"icon"}},[a("el-input",{attrs:{size:"small",type:"text"},model:{value:e.editForm.icon,callback:function(t){e.$set(e.editForm,"icon",t)},expression:"editForm.icon"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:e.dialogOptions.editBtnLoading},on:{click:e.handleNavEdit}},[e._v("保存")]),a("el-button",{on:{click:function(t){e.dialogOptions.editVisible=!1}}},[e._v("取消")])],1)],1)],1)],2)},i=[],o=(a("4160"),a("a15b"),a("159b"),a("5530")),l=(a("99af"),a("22ce"));function r(){return Object(l["b"])({url:"/navs",method:"get"})}function s(e){return Object(l["b"])({url:"/navs",method:"post",data:e})}function d(e){return Object(l["b"])({url:"/navs",method:"put",data:e})}function c(e,t){return Object(l["b"])({url:"/navs/".concat(e,"/up/").concat(t),method:"patch"})}function u(e,t){return Object(l["b"])({url:"/navs/".concat(e,"/down/").concat(t),method:"patch"})}function m(e){return Object(l["b"])({url:"/navs/".concat(e),method:"delete"})}function p(e){return Object(l["b"])({url:"/navs?ids=".concat(e),method:"delete"})}var f={name:"navs",data:function(){return{tableData:[],selectList:[],addForm:{name:"",parent_nav_id:null,open_type:0,url:"",icon:""},editForm:{ID:null,name:"",parent_nav_id:null,open_type:0,url:"",icon:""},addRules:{name:[{required:!0,trigger:"blur",message:"请输入菜单名称"},{max:100,trigger:"blur",message:"菜单名称不能超过 100 个字符"}],url:[{required:!0,trigger:"blur",message:"请输入 URL"},{max:255,trigger:"blur",message:"菜单名称不能超过 255 个字符"}],icon:[{max:255,trigger:"blur",message:"图标不能超过 255 个字符"}]},editRules:{name:[{required:!0,trigger:"blur",message:"请输入菜单名称"},{max:100,trigger:"blur",message:"菜单名称不能超过 100 个字符"}],url:[{required:!0,trigger:"blur",message:"请输入 URL"},{max:255,trigger:"blur",message:"菜单名称不能超过 255 个字符"}],icon:[{max:255,trigger:"blur",message:"图标不能超过 255 个字符"}]},dialogOptions:{addVisible:!1,addBtnLoading:!1,editVisible:!1,editBtnLoading:!1},curWindow:0,newWindow:1,loading:!1}},created:function(){this.fetchTableData()},methods:{resetForm:function(e){void 0!==this.$refs[e]&&this.$refs[e].resetFields()},clearValidate:function(e){void 0!==this.$refs[e]&&this.$refs[e].clearValidate()},fetchTableData:function(){var e=this;this.loading=!0,setTimeout((function(){r().then((function(t){e.tableData=t.data})).catch((function(){})),e.loading=!1}),300)},openAddDialog:function(){this.resetForm("addForm"),this.dialogOptions.addVisible=!0},openEditDialog:function(e){0===e.parent_nav_id&&(e.parent_nav_id=null),this.editForm=Object(o["a"])({},e),this.dialogOptions.editVisible=!0},handleNavAdd:function(){var e=this;this.$refs.addForm.validate((function(t){t&&(e.dialogOptions.addBtnLoading=!0,setTimeout((function(){s(e.addForm).then((function(t){e.$message.success(t.msg),e.dialogOptions.addVisible=!1,e.fetchTableData()})).catch((function(){})),e.dialogOptions.addBtnLoading=!1}),300))}))},handleNavEdit:function(){var e=this;this.$refs.editForm.validate((function(t){if(t){if(e.editForm.parent_nav_id===e.editForm.ID)return void e.$message.error("不能将自身设置为父级菜单");e.dialogOptions.editBtnLoading=!0,setTimeout((function(){d(e.editForm).then((function(t){e.$message.success(t.msg),e.dialogOptions.editVisible=!1,e.fetchTableData()})).catch((function(){})),e.dialogOptions.editBtnLoading=!1}),300)}}))},handleNavMoveUp:function(e,t){var a=this,n=0===e.parent_nav_id?"parent":"child";c(n,e.order_id).then((function(e){a.$message.success(e.msg),a.fetchTableData()})).catch((function(){}))},handleNavMoveDown:function(e,t){var a=this,n=0===e.parent_nav_id?"parent":"child";u(n,e.order_id).then((function(e){a.$message.success(e.msg),a.fetchTableData()})).catch((function(){}))},handleNavDelete:function(e){var t=this;this.$confirm("确定要删除吗?","删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then((function(){m(e).then((function(e){t.$message.success(e.msg),t.fetchTableData()})).catch((function(){}))})).catch((function(){}))},handleSelectChange:function(e){var t=this;e.forEach((function(e){t.selectList.push(e.ID)}))},handleNavsMultiDel:function(){var e=this;0!==this.selectList.length?this.$confirm("确定要删除吗?","删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then((function(){var t=e.selectList.join(",");p(t).then((function(t){e.$message.success(t.msg),e.fetchTableData()})).catch((function(){}))})).catch((function(){})):this.$message.error("请勾选要删除的条目")}}},b=f,h=(a("6957"),a("2877")),v=Object(h["a"])(b,n,i,!1,null,"90d669d2",null);t["default"]=v.exports}}]);