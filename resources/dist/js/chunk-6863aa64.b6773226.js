(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6863aa64"],{"3f11":function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return o})),n.d(e,"a",(function(){return s})),n.d(e,"f",(function(){return c})),n.d(e,"b",(function(){return r})),n.d(e,"e",(function(){return l}));var a=n("22ce");function i(){return Object(a["b"])({url:"/all_tags",method:"get"})}function o(t){return Object(a["b"])({url:"/tags",method:"get",params:t})}function s(t){return Object(a["b"])({url:"/tags",method:"post",data:t})}function c(t){return Object(a["b"])({url:"/tags",method:"put",data:t})}function r(t){return Object(a["b"])({url:"/tags/".concat(t),method:"delete"})}function l(t){return Object(a["b"])({url:"/tags?ids=".concat(t),method:"delete"})}},"75c3":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("d2-container",[n("template",{slot:"header"},[t._v("文章 / 标签")]),n("d2-crud",{ref:"d2Crud",attrs:{loading:t.loading,columns:t.columns,data:t.data,options:t.options,pagination:t.pagination,"form-options":t.formOptions,"row-handle":t.rowHandle,"add-title":"添加标签","add-template":t.addTemplate,"add-rules":t.addRules,"edit-title":"修改标签","edit-template":t.editTemplate,"edit-rules":t.editRules,"selection-row":""},on:{"pagination-current-change":t.paginationCurrentChange,"row-add":t.handleRowAdd,"dialog-cancel":t.handleDialogCancel,"row-edit":t.handleRowEdit,"row-remove":t.handleRowRemove,"selection-change":t.handleSelectionChange}},[n("el-form",{staticClass:"demo-form-inline",attrs:{slot:"header",inline:!0},slot:"header"},[n("el-form-item",[n("el-button",{staticStyle:{"margin-bottom":"5px"},attrs:{size:"small",type:"danger"},on:{click:t.handleRowListRemove}},[n("i",{staticClass:"el-icon-delete"}),t._v(" 批量删除 ")])],1),n("el-form-item",[n("el-button",{staticStyle:{"margin-bottom":"5px"},attrs:{size:"small",type:"primary"},on:{click:t.addRow}},[n("i",{staticClass:"el-icon-plus"}),t._v(" 新增 ")])],1),n("el-form-item",[n("el-input",{attrs:{size:"small",placeholder:"请输入标签名称"},model:{value:t.pagination.key,callback:function(e){t.$set(t.pagination,"key",e)},expression:"pagination.key"}})],1),n("el-form-item",[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.search}},[n("i",{staticClass:"el-icon-search"}),t._v(" 搜索")])],1),n("el-form-item",[n("el-button",{attrs:{size:"small"},on:{click:t.reset}},[n("i",{staticClass:"el-icon-refresh"}),t._v(" 重置")])],1)],1)],1)],2)},i=[],o=(n("4160"),n("a15b"),n("159b"),n("5530")),s=n("3f11"),c={name:"tag",data:function(){return{columns:[{title:"标签名称",key:"name",width:"180"}],data:[],selection:[],pagination:{currentPage:1,pageSize:10,total:0,key:""},options:{border:!0},formOptions:{labelWidth:"80px",labelPosition:"left",saveLoading:!1},rowHandle:{remove:{icon:"el-icon-delete",size:"small",fixed:"right",confirm:!0},edit:{icon:"el-icon-edit",text:"编辑",size:"small"}},addTemplate:{name:{title:"标签名称",value:""}},editTemplate:{name:{title:"标签名称",value:""}},addRules:{name:[{required:!0,message:"请输入标签名称",trigger:"blur"}]},editRules:{name:[{required:!0,message:"请输入标签名称",trigger:"blur"}]},loading:!1}},created:function(){this.fetchData()},methods:{paginationCurrentChange:function(t){this.pagination.currentPage=t,this.fetchData()},fetchData:function(){var t=this;this.loading=!0,setTimeout((function(){Object(s["d"])({page:t.pagination.currentPage,size:t.pagination.pageSize,key:t.pagination.key}).then((function(e){var n=e.data;t.data=n.data,t.pagination.total=n.total_num})).catch((function(){})),t.loading=!1}),300)},search:function(){this.pagination.currentPage=1,this.fetchData()},reset:function(){this.pagination={currentPage:1,pageSize:10,total:0,key:""},this.fetchData()},addRow:function(){this.$refs.d2Crud.showDialog({mode:"add"})},handleRowAdd:function(t,e){var n=this;this.formOptions.saveLoading=!0,setTimeout((function(){Object(s["a"])(t).then((function(t){n.$message.success(t.msg),e(),n.fetchData(),n.fetchParentCategories()})).catch((function(){})),n.formOptions.saveLoading=!1}),300)},handleRowEdit:function(t,e){var n=this;this.formOptions.saveLoading=!0;var a=Object(o["a"])({},t.row);setTimeout((function(){Object(s["f"])(a).then((function(t){n.$message.success(t.msg),e(),n.fetchData(),n.fetchParentCategories()})).catch((function(){})),n.formOptions.saveLoading=!1}),300)},handleSelectionChange:function(t){this.selection=t},handleRowRemove:function(t){var e=this;setTimeout((function(){Object(s["b"])(t.row.ID).then((function(t){e.$message.success(t.msg),e.fetchData(),e.fetchParentCategories()})).catch((function(){}))}),300)},handleRowListRemove:function(){var t=this;0===this.selection.length?this.$message.error("请勾选要删除的条目"):this.$confirm("确定要删除吗?","删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then((function(){var e=[];t.selection.forEach((function(t){e.push(t.ID)})),e=e.join(),setTimeout((function(){Object(s["e"])(e).then((function(e){t.$message.success(e.msg),t.fetchData(),t.fetchParentCategories()})).catch((function(){}))}),300)})).catch((function(){}))},handleDialogCancel:function(t){this.$message.warning("取消保存"),t()}}},r=c,l=n("2877"),u=Object(l["a"])(r,a,i,!1,null,null,null);e["default"]=u.exports}}]);